<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Infinity Mini Player Test</title>

<style>
body {
  background: #020712;
  margin: 0;
}

/* Floating Mini Player Container */
#miniPlayer {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 240px;
  height: 135px;
  background: #000;
  border: 2px solid #00eaff;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 0 20px #00eaff99;
  display: none;
  z-index: 99999;
}

/* Video inside the mini player */
#miniVideo {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

/* Resize handle */
#resizeHandle {
  position: absolute;
  width: 22px;
  height: 22px;
  right: 0;
  bottom: 0;
  background: #00eaff;
  border-top-left-radius: 8px;
  cursor: se-resize;
}

/* Upload button */
#uploadBtn {
  position: fixed;
  top: 20px;
  left: 20px;
  padding: 12px 16px;
  background: #00eaff;
  border-radius: 10px;
  font-weight: bold;
  color: #000;
  border: none;
}
</style>
</head>
<body>

<input type="file" id="uploadBtn" accept="video/*">

<div id="miniPlayer">
  <video id="miniVideo" autoplay controls playsinline></video>
  <div id="resizeHandle"></div>
</div>

<script>
// Elements
const player = document.getElementById("miniPlayer");
const video = document.getElementById("miniVideo");
const upload = document.getElementById("uploadBtn");
const resize = document.getElementById("resizeHandle");

// Load video
upload.addEventListener("change", () => {
  let file = upload.files[0];
  if (!file) return;

  video.src = URL.createObjectURL(file);
  player.style.display = "block";
});

/* Dragging */
let drag = false, dx = 0, dy = 0;

player.addEventListener("mousedown", e => {
  drag = true;
  dx = e.clientX - player.offsetLeft;
  dy = e.clientY - player.offsetTop;
});

document.addEventListener("mousemove", e => {
  if (!drag) return;
  player.style.left = (e.clientX - dx) + "px";
  player.style.top = (e.clientY - dy) + "px";
  player.style.right = "auto";
  player.style.bottom = "auto";
});

document.addEventListener("mouseup", () => drag = false);

/* Resizing */
let resizing = false, startW, startH, startX, startY;

resize.addEventListener("mousedown", e => {
  e.stopPropagation();
  resizing = true;
  startW = player.offsetWidth;
  startH = player.offsetHeight;
  startX = e.clientX;
  startY = e.clientY;
});

document.addEventListener("mousemove", e => {
  if (!resizing) return;
  player.style.width  = startW + (e.clientX - startX) + "px";
  player.style.height = startH + (e.clientY - startY) + "px";
});

document.addEventListener("mouseup", () => resizing = false);
</script>

</body>
</html>

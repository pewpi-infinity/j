<!DOCTYPE html>
<html>
<head>
<!-- MODULE 1: STYLE -->
<style>
    body {
        background:#000;
        color:#fff;
        font-family:Arial;
        margin:0;
        overflow:hidden;
    }

    #editor {
        display:grid;
        grid-template-columns:repeat(32, 32px);
        grid-template-rows:repeat(18, 32px);
        width:1024px;
        height:576px;
        background:#111;
        perspective:900px;
        margin:20px auto;
    }

    .tile {
        width:32px;
        height:32px;
        background-size:cover;
        transform:rotateX(18deg);
    }

    #sidebar {
        position:absolute;
        right:0; top:0; bottom:0;
        width:260px;
        background:#0c0c0c;
        padding:20px;
        overflow-y:auto;
        border-left:2px solid #222;
    }

    .button {
        background:#0af;
        padding:10px;
        border-radius:6px;
        text-align:center;
        margin-bottom:12px;
        cursor:pointer;
        font-weight:bold;
    }
    .button:hover {
        background:#08c;
    }
</style>
    <title>Infinity OS — Reactor + Mario Builder Engine</title>

    <style>
        body {
            background:#000;
            color:#fff;
            font-family:Arial;
            margin:0;
            overflow:hidden;
        }
        h2 {
            margin-top:40px;
        }

        /* ====================
           SHARED PANEL STYLES
        ===================== */
        .module {
            padding:20px;
            border-bottom:2px solid #222;
        }

        /* ====================
           REACTOR VISUAL
        ===================== */
        .ring {
            margin:10px auto;
            height:20px;
            background:#0af;
            border-radius:20px;
            transition:width 0.08s linear;
        }
        #middle { background:#0df; }
        #outer { background:#0ff; }

        /* ====================
            MARIO BUILDER 3D GRID
        ===================== */
        #editor {
            display:grid;
            grid-template-columns:repeat(32, 32px);
            grid-template-rows:repeat(18, 32px);
            width:990px;
            height:580px;
            background:#111;
            perspective:900px;
            margin:auto;
            transform:translateY(20px);
        }
        .tile {
            width:32px;
            height:32px;
            background-size:cover;
            transform:rotateX(18deg);
        }

        #sidebar {
            width:260px;
            position:absolute;
            right:0;
            top:0;
            bottom:0;
            background:#0b0b0b;
            padding:20px;
            border-left:2px solid #222;
            overflow:auto;
        }
        .btn {
            background:#0af;
            padding:12px;
            margin:12px 0;
            border-radius:8px;
            text-align:center;
            cursor:pointer;
            font-weight:bold;
        }
        .btn:hover {
            background:#08c;
        }
    </style>
</head>

<body>

<!-- ============================================================
     STEP 1 — INFINITY REACTOR SPIRAL RINGS VISUAL
=============================================================== -->
<div class="module">
    <h2>Infinity Reactor</h2>

    <div id="inner" class="ring" style="width:10px;"></div>
    <div id="middle" class="ring" style="width:20px;"></div>
    <div id="outer" class="ring" style="width:30px;"></div>
</div>


<!-- ============================================================
     STEP 2 — VECTOR ENGINE
=============================================================== -->
<script>
class Vec {
    constructor(x=0,y=0,z=0,t=0){
        this.x=x; this.y=y; this.z=z; this.t=t;
    }
    add(v){ return new Vec(this.x+v.x,this.y+v.y,this.z+v.z,this.t+v.t); }
    scale(k){ return new Vec(this.x*k,this.y*k,this.z*k,this.t*k); }
    mag(){ return Math.sqrt(this.x**2+this.y**2+this.z**2+this.t**2); }
}

function quantumSpiral(a,b,theta){
    return a * Math.exp(b * theta);
}
</script>


<!-- ============================================================
     STEP 3 — HYDROGEN API
=============================================================== -->
<script>
class HydrogenDoorway {
    constructor(){
        this.spin=0;
        this.storage=null;
    }
    open(){ this.spin=1; }
    close(){ this.spin=0; }
    store(data){ this.storage = JSON.stringify(data); }
    release(){ return JSON.parse(this.storage || "null"); }
    bind(v){ return new Vec(v.x*0.93, v.y*0.93, v.z*0.93, v.t*1.07); }
}
</script>


<!-- ============================================================
     STEP 4 — GAME PLUG MODULE
=============================================================== -->
<script>
class GamePlug {
    constructor(){
        this.tiles=[];
        this.objects=[];
    }
    addTile(x,y,type){
        this.tiles.push({x,y,type});
    }
    addPortal(x,y,dest){
        this.objects.push({type:"hydrogen_portal",x,y,dest});
    }
    addVectorZone(x,y,w,h,vec){
        this.objects.push({type:"vector_zone",x,y,w,h,vec});
    }
}
</script>


<!-- ============================================================
     STEP 5 — STORAGE SYSTEM
=============================================================== -->
<script>
function saveLevel(tiles){
    localStorage.setItem("mario_level", JSON.stringify(tiles));
}
function loadLevel(){
    return JSON.parse(localStorage.getItem("mario_level") || "[]");
}
</script>


<!-- ============================================================
     STEP 6 — MARIO 3D BUILDER ENGINE (UI)
=============================================================== -->

<div class="module">
    <h2>Mario 3D Builder</h2>

    <div id="editor"></div>
</div>

<div id="sidebar">
    <h2>MARIO BUILDER</h2>
    <div class="btn" id="brickBtn">Brick</div>
    <div class="btn" id="warpBtn">Hydrogen Portal</div>
    <div class="btn" id="vecBtn">Vector Zone</div>
    <hr style="border-color:#333">
    <div class="btn" id="saveBtn">Save Level</div>
</div>

<script>
let activeTile="brick";
let level = loadLevel();

// build 32×18 grid
let editor = document.getElementById("editor");
for (let y=0;y<18;y++){
  for (let x=0;x<32;x++){
      let d=document.createElement("div");
      d.className="tile";
      d.dataset.x=x;
      d.dataset.y=y;

      let saved = level.find(t=>t.x==x && t.y==y);
      if (saved) d.style.backgroundImage="url(tileset.png#"+saved.type+")";

      d.onclick = () => {
          d.style.backgroundImage="url(tileset.png#"+activeTile+")";
          let exist = level.find(t=>t.x==x && t.y==y);
          if (exist) exist.type=activeTile;
          else level.push({x,y,type:activeTile});
      };

      editor.appendChild(d);
  }
}

// button actions
brickBtn.onclick = ()=>activeTile="brick";
warpBtn.onclick = ()=>activeTile="hydrogen_portal";
vecBtn.onclick = ()=>activeTile="vector_zone";

saveBtn.onclick = ()=>{
    saveLevel(level);
    alert("Saved!");
};
</script>


<!-- ============================================================
     STEP 7 — REACTOR LOOP (LIVE ANIMATION)
=============================================================== -->
<script>
let theta = 0;

function tick(){
    theta += 0.03;

    let inner = quantumSpiral(0.3,0.11,theta);
    let middle = quantumSpiral(0.5,0.08,theta);
    let outer = quantumSpiral(0.7,0.06,theta);

    document.getElementById("inner").style.width = (inner*200)+"px";
    document.getElementById("middle").style.width = (middle*200)+"px";
    document.getElementById("outer").style.width = (outer*200)+"px";

    requestAnimationFrame(tick);
}
tick();
</script>

</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Infinity Mario 3D Editor</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div id="editor"></div>

<div id="sidebar">
    <h2>3D Mario Builder</h2>

    <div id="brickBtn" class="button">Brick Block</div>
    <div id="warpBtn" class="button">Hydrogen Portal</div>
    <div id="vecBtn" class="button">Vector Zone</div>

    <hr style="border-color:#333">

    <div id="saveBtn" class="button">Save Level</div>
</div>

<script type="module" src="editor.js"></script>
<!-- MODULE 2: VECTOR ENGINE -->
<script>
class Vec {
    constructor(x=0,y=0,z=0,t=0){
        this.x=x; this.y=y; this.z=z; this.t=t;
    }
    add(v){ return new Vec(this.x+v.x,this.y+v.y,this.z+v.z,this.t+v.t); }
    scale(k){ return new Vec(this.x*k,this.y*k,this.z*k,this.t*k); }
}

function quantumSpiral(a,b,theta){
    return a * Math.exp(b * theta);
}
</script>
<!-- MODULE 3: HYDROGEN API -->
<script>
class HydrogenDoorway {
    constructor(){
        this.spin=0;
        this.saved=null;
    }
    open(){ this.spin=1; }
    close(){ this.spin=0; }
    store(data){ this.saved = JSON.stringify(data); }
    release(){ return JSON.parse(this.saved || "null"); }
    bind(v){ return new Vec(v.x*0.93, v.y*0.93, v.z*0.93, v.t*1.07); }
}
</script>
<!-- MODULE 4: STORAGE SYSTEM -->
<script>
function saveLevel(tiles){
    localStorage.setItem("mario_level", JSON.stringify(tiles));
}
function loadLevel(){
    return JSON.parse(localStorage.getItem("mario_level") || "[]");
}
</script>
<!-- MODULE 5: MARIO BUILDER -->
<script>
let editor = document.getElementById("editor");
let activeTile = "brick";
let level = loadLevel();

// Build grid
for (let y = 0; y < 18; y++){
    for (let x = 0; x < 32; x++){
        let tile = document.createElement("div");
        tile.className = "tile";
        tile.dataset.x = x;
        tile.dataset.y = y;

        let saved = level.find(t => t.x==x && t.y==y);
        if (saved) tile.style.backgroundImage = "url(tileset.png#" + saved.type + ")";

        tile.onclick = () => {
            tile.style.backgroundImage = "url(tileset.png#" + activeTile + ")";
            let exists = level.find(t => t.x==x && t.y==y);
            if (exists) exists.type = activeTile;
            else level.push({x,y,type:activeTile});
        };

        editor.appendChild(tile);
    }
}

// Buttons
document.getElementById("brickBtn").onclick = () => activeTile = "brick";
document.getElementById("warpBtn").onclick  = () => activeTile = "hydrogen_portal";
document.getElementById("vecBtn").onclick   = () => activeTile = "vector_zone";

document.getElementById("saveBtn").onclick = () => {
    saveLevel(level);
    alert("Saved Successfully!");
};
</script>
<!-- MODULE 6: REACTOR SPIRAL -->
<div id="inner" class="ring" style="height:14px; background:#0af; border-radius:8px;"></div>
<div id="middle" class="ring" style="height:14px; background:#0df; border-radius:8px;"></div>
<div id="outer" class="ring" style="height:14px; background:#0ff; border-radius:8px;"></div>

<script>
let theta = 0;
function reactorLoop(){
    theta += 0.03;
    let i = quantumSpiral(0.3,0.11,theta) * 200;
    let m = quantumSpiral(0.5,0.08,theta) * 200;
    let o = quantumSpiral(0.7,0.06,theta) * 200;

    inner.style.width  = i + "px";
    middle.style.width = m + "px";
    outer.style.width  = o + "px";

    requestAnimationFrame(reactorLoop);
}
reactorLoop();
</script>
</body>
</html>

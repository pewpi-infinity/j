<!DOCTYPE html>
<html>
<head>
    <title>Infinity Mario 3D Builder</title>
    <style>
        body {
            background:#000;
            color:#fff;
            font-family:Arial;
            overflow:hidden;
            display:flex;
        }
        #editor {
            flex:1;
            display:grid;
            grid-template-columns:repeat(32, 32px);
            grid-template-rows:repeat(18, 32px);
            background:#111;
            perspective:900px;
        }
        .tile {
            width:32px;
            height:32px;
            background-size:cover;
            transform:rotateX(18deg);
        }
        #sidebar {
            width:260px;
            background:#0b0b0b;
            padding:20px;
            border-left:2px solid #222;
            overflow:auto;
        }
        .btn {
            background:#0af;
            padding:12px;
            margin:12px 0;
            border-radius:8px;
            text-align:center;
            cursor:pointer;
            font-weight:bold;
        }
        .btn:hover {
            background:#08c;
        }
    </style>
</head>
<body>

<div id="editor"></div>

<div id="sidebar">
    <h2>MARIO 3D BUILDER</h2>

    <div id="brickBtn" class="btn">Brick</div>
    <div id="warpBtn" class="btn">Hydrogen Portal</div>
    <div id="vecBtn" class="btn">Vector Zone</div>

    <hr style="border-color:#333">
    <div id="saveBtn" class="btn">Save Level</div>
</div>

<script>
let editor = document.getElementById("editor");
let activeTile = "brick";
let level = JSON.parse(localStorage.getItem("mario_level") || "[]");

// create grid
for (let y=0; y<18; y++){
    for (let x=0; x<32; x++){

        let div = document.createElement("div");
        div.className = "tile";
        div.dataset.x = x;
        div.dataset.y = y;

        let saved = level.find(t => t.x == x && t.y == y);
        if (saved) div.style.backgroundImage = "url(tileset.png#" + saved.type + ")";

        div.onclick = () => {
            div.style.backgroundImage = "url(tileset.png#" + activeTile + ")";
            let exists = level.find(t => t.x == x && t.y == y);
            if (exists) exists.type = activeTile;
            else level.push({x, y, type: activeTile});
        };

        editor.appendChild(div);
    }
}

// button hookups
document.getElementById("brickBtn").onclick = () => activeTile = "brick";
document.getElementById("warpBtn").onclick = () => activeTile = "hydrogen_portal";
document.getElementById("vecBtn").onclick = () => activeTile = "vector_zone";

document.getElementById("saveBtn").onclick = () => {
    localStorage.setItem("mario_level", JSON.stringify(level));
    alert("Saved!");
};
</script>

</body>
</html>
